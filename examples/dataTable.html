<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DataTables Pagination Example (Mock Data with AJAX)</title>
  <!-- Include Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Include DataTables CSS -->
  <link href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <h1 class="mb-4">DataTables Server-Side Example (Mock Data)</h1>
    <table id="example" class="table table-striped table-bordered" style="width:100%">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
        </tr>
      </thead>
    </table>
  </div>

  <!-- Include jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Include Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Include DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>

  <script src="../lib/bootTables.umd.js"></script>

  <script>
    $(document).ready(function() {
      // Mock data for the table
      const mockData = [];
      for (let i = 1; i <= 100; i++) {
        mockData.push({
          id: i,
          name: `Name ${i}`,
          email: `email${i}@example.com`,
        });
      }

      // Implement server-side simulation using DataTables AJAX
      $('#example').DataTable({
        processing: true, // Show "processing" indicator
        serverSide: true, // Enable server-side mode
        ajax: function(ajaxData, callback, settings) {
          const params = bootTables.buildParams(ajaxData);

          console.log(JSON.stringify(params, null, 2));

          const rendered = bootTables.renderJs(
            mockData,
            params
          );

          console.log(JSON.stringify(rendered, null, 2));

          callback(rendered);
          /**
          // Extract DataTables pagination parameters
          const start = ajaxData.start;        // Starting index for pagination
          const length = ajaxData.length;      // Number of records per page

          // Simulate server-side pagination
          const paginatedData = mockData.slice(start, start + length);

          // Prepare response (simulate server response)
          const response = {
            draw: ajaxData.draw,              // Echo back the draw count
            recordsTotal: mockData.length,    // Total number of records
            recordsFiltered: mockData.length, // After filters (none applied in mock setup)
            data: paginatedData,              // Paginated data
          };

          // Provide response to DataTables via callback
          callback(response);
          **/
        },
        columns: [
          { data: 'id' },    // Column connected to 'id'
          { data: 'name' },  // Column connected to 'name'
          { data: 'email' }, // Column connected to 'email'
        ],
      });
    });
  </script>
</body>
</html>